"use strict";(self["webpackChunkamiyabot_console"]=self["webpackChunkamiyabot_console"]||[]).push([[265],{5676:function(e,t,a){a.r(t),a.d(t,{default:function(){return H}});var i=a(8838),l=a(8131),n=(a(7113),a(9866)),o=(a(172),a(457)),s=a(5065),c=(a(3189),a(9971)),r=(a(1430),a(6605)),d=(a(6809),a(3396)),u=a(7139),p=a(9242);const g=(0,d.Uk)("添加词语替换"),f=(0,d.Uk)("同步词语替换"),w=(0,d.Uk)("黑名单设置"),m=(0,d.Uk)("白名单设置"),y=(0,d.Uk)(" 设为全局启用 "),h=(0,d.Uk)(" 关闭全局启用 "),k=(0,d.Uk)("删除"),_=(0,d.Uk)("保存"),b={class:"setting-word"},R=(0,d.Uk)(" + 添加词语 ");function C(e,t,a,C,W,S){const v=r.mi,V=c.Ks,Z=s.E2,U=o.Z,M=n.EZ,L=l.nH,j=i.Z;return(0,d.wg)(),(0,d.iD)("div",null,[(0,d.Wm)(U,{ref:"table",load:e.loadList},{header:(0,d.w5)((()=>[(0,d.Wm)(v,{type:"primary",onClick:t[0]||(t[0]=t=>e.$refs.dialog.show())},{default:(0,d.w5)((()=>[g])),_:1}),(0,d.Wm)(v,{type:"warning",onClick:e.syncReplace},{default:(0,d.w5)((()=>[f])),_:1},8,["onClick"]),(0,d.Wm)(v,{onClick:t[1]||(t[1]=t=>e.wordSetting(1))},{default:(0,d.w5)((()=>[w])),_:1}),(0,d.Wm)(v,{onClick:t[2]||(t[2]=t=>e.wordSetting(0))},{default:(0,d.w5)((()=>[m])),_:1})])),cell:(0,d.w5)((({value:e,field:t})=>["is_global"===t?((0,d.wg)(),(0,d.j4)(V,{key:0,type:e?"success":"info"},{default:(0,d.w5)((()=>[(0,d.Uk)((0,u.zw)(e?"是":"否"),1)])),_:2},1032,["type"])):(0,d.kq)("",!0),"is_active"===t?((0,d.wg)(),(0,d.j4)(V,{key:1,type:e?"success":"danger"},{default:(0,d.w5)((()=>[(0,d.Uk)((0,u.zw)(e?"是":"否"),1)])),_:2},1032,["type"])):(0,d.kq)("",!0)])),operations:(0,d.w5)((({row:t})=>[0===t.is_global?((0,d.wg)(),(0,d.j4)(Z,{key:0,underline:!1,type:"success",onClick:a=>e.updateReplace(t,1)},{default:(0,d.w5)((()=>[y])),_:2},1032,["onClick"])):((0,d.wg)(),(0,d.j4)(Z,{key:1,underline:!1,type:"warning",onClick:a=>e.updateReplace(t,0)},{default:(0,d.w5)((()=>[h])),_:2},1032,["onClick"])),(0,d.Wm)(Z,{underline:!1,type:"danger",onClick:a=>e.delReplace(t)},{default:(0,d.w5)((()=>[k])),_:2},1032,["onClick"])])),_:1},8,["load"]),(0,d.Wm)(j,{title:"添加词语替换",form:e.form,ref:"dialog"},{footer:(0,d.w5)((()=>[(0,d.Wm)(v,{type:"primary",onClick:e.submit},{default:(0,d.w5)((()=>[_])),_:1},8,["onClick"])])),default:(0,d.w5)((()=>[(0,d.Wm)(L,{label:"被替换词语"},{default:(0,d.w5)((()=>[(0,d.Wm)(M,{modelValue:e.form.origin,"onUpdate:modelValue":t[3]||(t[3]=t=>e.form.origin=t)},null,8,["modelValue"])])),_:1}),(0,d.Wm)(L,{label:"替换词语"},{default:(0,d.w5)((()=>[(0,d.Wm)(M,{modelValue:e.form.replace,"onUpdate:modelValue":t[4]||(t[4]=t=>e.form.replace=t)},null,8,["modelValue"])])),_:1})])),_:1},8,["form"]),(0,d.Wm)(j,{title:"审核词设置："+(e.settingMode?"黑名单":"白名单"),ref:"setting"},{default:(0,d.w5)((()=>[(0,d._)("div",b,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(e.settingWord,((t,a)=>((0,d.wg)(),(0,d.iD)(d.HY,null,[t.status===e.settingMode?((0,d.wg)(),(0,d.j4)(V,{class:"tag",closable:"",key:a,"disable-transitions":!1,onClose:a=>e.delReplaceSetting(t)},{default:(0,d.w5)((()=>[(0,d.Uk)((0,u.zw)(t.text),1)])),_:2},1032,["onClose"])):(0,d.kq)("",!0)],64)))),256)),(0,d.wy)((0,d.Wm)(M,{class:"add",size:"small",ref:"tagInput",modelValue:e.inputValue,"onUpdate:modelValue":t[5]||(t[5]=t=>e.inputValue=t),onKeyup:(0,p.D2)(e.addSetting,["enter"]),onBlur:e.cancelAddSetting},null,8,["modelValue","onKeyup","onBlur"]),[[p.F8,e.inputMode]]),(0,d.wy)((0,d.Wm)(v,{class:"add",size:"small",onClick:t[6]||(t[6]=t=>e.inputMode=!0)},{default:(0,d.w5)((()=>[R])),_:1},512),[[p.F8,!e.inputMode]])])])),_:1},8,["title"])])}var W=a(2482),S=a(6520),v=a(3505);const V=new v.Z;async function Z(e){return await V.post({url:"/replace/getReplace",data:e})}async function U(e){return await V.post({url:"/replace/updateReplace",data:e})}async function M(e){return await V.post({url:"/replace/addReplace",data:e})}async function L(e){return await V.post({url:"/replace/deleteReplace",data:e})}async function j(){return await V.get({url:"/replace/getReplaceSetting"})}async function D(e){return await V.post({url:"/replace/addReplaceSetting",data:e})}async function x(e){return await V.post({url:"/replace/deleteReplaceSetting",data:e})}async function z(){return await V.get({url:"/replace/syncReplace"})}var $=a(8418),K=function(e,t,a,i){var l,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,a,i);else for(var s=e.length-1;s>=0;s--)(l=e[s])&&(o=(n<3?l(o):n>3?l(t,a,o):l(t,a))||o);return n>3&&o&&Object.defineProperty(t,a,o),o};let q=class extends S.w3{constructor(...e){super(...e),(0,W.Z)(this,"table",void 0),(0,W.Z)(this,"dialog",void 0),(0,W.Z)(this,"setting",void 0),(0,W.Z)(this,"form",{origin:"",replace:""}),(0,W.Z)(this,"settingWord",[]),(0,W.Z)(this,"settingMode",0),(0,W.Z)(this,"inputMode",!1),(0,W.Z)(this,"inputValue","")}async loadList(e){const t=await Z(e);t&&this.table.setPaginationData(t.data)}async updateReplace(e,t){const a={...e,is_global:t},i=await U(a);i&&this.table.executeLoad()}async delReplace(e){const t=await L(e);t&&this.table.executeLoad()}async submit(){const e=await M(this.form);e&&(this.dialog.hide(),this.table.executeLoad(),this.form={origin:"",replace:""})}async getReplaceSettingList(){const e=await j();e&&(this.settingWord=e.data)}async addSetting(){const e={text:this.inputValue,status:this.settingMode},t=await D(e);t&&(this.settingWord=t.data),this.cancelAddSetting(),await this.getReplaceSettingList()}async delReplaceSetting(e){const t=await x(e);t&&await this.getReplaceSettingList()}async wordSetting(e){await this.getReplaceSettingList(),this.settingMode=e,this.setting.show()}async syncReplace(){const e=await z();e&&this.table.executeLoad(!0)}cancelAddSetting(){this.inputMode=!1,this.inputValue=""}};q=K([(0,S.Ei)({components:{VTable:o.Z,VFormDialog:i.Z},computed:{table(){return this.$refs.table},dialog(){return this.$refs.dialog},setting(){return this.$refs.setting}},watch:{inputMode(e){e&&this.$refs.tagInput.focus()}},mounted(){this.table.setColumns({user_id:{title:"添加用户",format:(e,t)=>"0"===t?"无":t},group_id:{title:"所在群组",format:(e,t)=>"0"===t?"无":t},origin:"被替换词语",replace:"替换词语",in_time:{title:"添加时间",format:(e,t)=>$.Z.formatDate(t)},is_active:"是否启用",is_global:"是否全局启用"})}})],q);var A=q,E=a(89);const F=(0,E.Z)(A,[["render",C],["__scopeId","data-v-5ef209e8"]]);var H=F}}]);
//# sourceMappingURL=265.fea71312.js.map